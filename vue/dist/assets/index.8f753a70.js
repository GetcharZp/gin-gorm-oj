var ae=Object.defineProperty;var K=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var J=(f,d,c)=>d in f?ae(f,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):f[d]=c,O=(f,d)=>{for(var c in d||(d={}))oe.call(d,c)&&J(f,c,d[c]);if(K)for(var c of K(d))se.call(d,c)&&J(f,c,d[c]);return f};import{d as ee,s as _,C as ne,r as v,o as p,c as R,w as u,g as e,j as F,k as z,F as L,u as E,K as te,L as ie,l as x,E as b,p as re,G as de,h as r,A as W,H as ce,v as X,t as D,_ as me,M as Y,I as Z,N as _e}from"./vendor.e61da12b.js";import{a as V}from"./api.ea65fb67.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";const ve=x("\u8F93\u5165\uFF1A"),ge=x("\u8F93\u51FA\uFF1A"),fe=x("\u521B\u5EFA "),Fe=x("\u53D6\u6D88"),be=ee({props:["sortList","selectQues"],emits:["cancel","submit"],setup(f,{emit:d}){const c=f,S=_("default"),B=_(),a=_({title:"",content:"",max_runtime:0,max_mem:0,test_cases:[{input:"",output:""}],problem_categories:[]});if(c.selectQues){let n=c.selectQues;n.problem_categories instanceof Array&&(n.problem_categories=n.problem_categories.map(i=>i.category_id)),(!Array.isArray(n.test_cases)||n.test_cases.length==0)&&(n.test_cases=[{input:"",output:""}]),a.value=n}const C=()=>{d("cancel")},w=ne({title:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"}],max_runtime:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"},{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57",trigger:"blur"}],max_mem:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"},{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57",trigger:"blur"}],test_cases:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"}],problem_categories:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}]}),$=()=>{a.value.test_cases.push({input:"",output:""})},U=n=>{a.value.test_cases.length>1&&a.value.test_cases.splice(n,1)},P=async n=>{!n||await n.validate((i,g)=>{i?a.value.identity?V.editProblem(a.value).then(m=>{m.data.code==200?(b.success("\u6210\u529F"),d("submit")):b(m.data.msg)}):V.addProblem(a.value).then(m=>{m.data.code==200?(b.success("\u6210\u529F"),d("submit")):b(m.data.msg)}):console.log("error submit!",g)})};return(n,i)=>{const g=v("el-input"),m=v("el-form-item"),T=v("el-option"),j=v("el-select"),k=v("el-col"),q=v("el-icon"),A=v("el-row"),Q=v("el-button"),y=v("el-form");return p(),R(y,{ref_key:"ruleFormRef",ref:B,model:a.value,rules:E(w),"label-width":"120px",class:"demo-ruleForm",size:S.value},{default:u(()=>[e(m,{label:"\u95EE\u9898\u540D\u79F0",prop:"title"},{default:u(()=>[e(g,{modelValue:a.value.title,"onUpdate:modelValue":i[0]||(i[0]=s=>a.value.title=s)},null,8,["modelValue"])]),_:1}),e(m,{label:"\u5185\u5BB9",prop:"content "},{default:u(()=>[e(g,{modelValue:a.value.content,"onUpdate:modelValue":i[1]||(i[1]=s=>a.value.content=s),type:"textarea"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u5206\u7C7B",prop:"problem_categories"},{default:u(()=>[e(j,{modelValue:a.value.problem_categories,"onUpdate:modelValue":i[2]||(i[2]=s=>a.value.problem_categories=s),placeholder:"\u8BF7\u9009\u62E9",multiple:"",style:{width:"100%"}},{default:u(()=>[(p(!0),F(L,null,z(f.sortList,s=>(p(),R(T,{label:s.name,value:s.id,key:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u6700\u5927\u8FD0\u884C\u65F6\u95F4",prop:"max_runtime"},{default:u(()=>[e(g,{modelValue:a.value.max_runtime,"onUpdate:modelValue":i[3]||(i[3]=s=>a.value.max_runtime=s),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6700\u5927\u5360\u7528\u5185\u5B58",prop:"max_mem"},{default:u(()=>[e(g,{modelValue:a.value.max_mem,"onUpdate:modelValue":i[4]||(i[4]=s=>a.value.max_mem=s),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6D4B\u8BD5\u6848\u4F8B",prop:"test_cases"},{default:u(()=>[(p(!0),F(L,null,z(a.value.test_cases,(s,M)=>(p(),R(m,{"label-width":"0",key:M},{default:u(()=>[e(A,{gutter:20},{default:u(()=>[e(k,{span:4,style:{"text-align":"right"}},{default:u(()=>[ve]),_:1}),e(k,{span:6},{default:u(()=>[e(g,{type:"textarea",modelValue:s.input,"onUpdate:modelValue":o=>s.input=o,rows:"6",cols:"40"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(k,{span:4,style:{"text-align":"right"}},{default:u(()=>[ge]),_:1}),e(k,{span:6},{default:u(()=>[e(g,{type:"textarea",modelValue:s.output,"onUpdate:modelValue":o=>s.output=o,rows:"6",cols:"40"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(k,{span:4},{default:u(()=>[e(q,{onClick:$},{default:u(()=>[e(E(te))]),_:1}),e(q,{onClick:o=>U(M)},{default:u(()=>[e(E(ie))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(m,null,{default:u(()=>[e(Q,{type:"primary",onClick:i[5]||(i[5]=s=>P(B.value))},{default:u(()=>[fe]),_:1}),e(Q,{onClick:C},{default:u(()=>[Fe]),_:1})]),_:1})]),_:1},8,["model","rules","size"])}}});const ye={class:"ques-list"},Be={class:"dialog-footer"},Ce=x("\u53D6\u6D88"),Ve=x("\u786E\u5B9A"),xe={class:"flex-box"},ke={class:"sort-list"},he=x(" \u5206\u7C7B\uFF1A"),Ee=["onClick"],we={class:"edit"},Ae={class:"list"},De=x("\u65B0\u589E\u95EE\u9898"),Se={class:"scroll"},$e={class:"title"},Ue={class:"sort"},ze={key:0},Le={class:"msg"},Pe={class:"edit"},qe={class:"pagi"},Qe=ee({setup(f){re();const d=_(!1),c=_([]),S=_([]),B=_(!1),a=_({name:"",id:""}),C=_(!1),w=_({}),$=_(10),U=_(1),P=_(0),n=_(null),i=_(""),g=()=>{C.value=!1,w.value={}},m=()=>{g(),y(n.value)},T=o=>{V.getProblemDetail({identity:o.identity}).then(t=>{t.data.data&&(w.value=t.data.data,C.value=!0)})},j=o=>{y(n.value)},k=o=>{a.value=O({},o),B.value=!0},q=o=>{y(n.value)},A=()=>{B.value=!1,a.value={name:"",id:""}},Q=o=>{_e.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u5206\u7C7B\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{V.delSort({identity:o.identity}).then(t=>{t.data.code==200?(b.success(t.data.msg),s()):b.warning(t.data.msg)})}).catch(()=>{})},y=o=>{n.value=o,d.value=!0,V.getProblemList({category_identity:o,size:$.value,page:U.value,keyword:i.value}).then(t=>{d.value=!1,t&&t.data&&(c.value=t.data.data.list,P.value=t.data.data.count),console.log(t)})};y(null);const s=()=>{V.getSortList({}).then(o=>{o&&o.data&&(S.value=o.data.data.list)})};s();const M=()=>{a.value.name?a.value.id?V.editSort(a.value).then(o=>{o.data.code==200?(b.success(o.data.msg),A(),s()):b.warning(o.data.msg)}):V.addSort({name:a.value.name}).then(o=>{o.data.code==200?(b.success(o.data.msg),A(),s()):b.warning(o.data.msg)}):b.warning("\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0")};return(o,t)=>{const H=v("el-input"),G=v("el-button"),I=v("el-dialog"),N=v("el-icon"),le=v("el-pagination"),ue=de("loading");return p(),F("div",ye,[e(I,{modelValue:B.value,"onUpdate:modelValue":t[1]||(t[1]=l=>B.value=l),title:a.value.id?"\u7F16\u8F91\u5206\u7C7B":"\u65B0\u589E\u5206\u7C7B",width:"30%","before-close":A},{footer:u(()=>[r("span",Be,[e(G,{onClick:A},{default:u(()=>[Ce]),_:1}),e(G,{type:"primary",onClick:M},{default:u(()=>[Ve]),_:1})])]),default:u(()=>[e(H,{modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.name=l),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1},8,["modelValue","title"]),e(I,{modelValue:C.value,"onUpdate:modelValue":t[2]||(t[2]=l=>C.value=l),title:w.value.id?"\u7F16\u8F91\u95EE\u9898":"\u65B0\u589E\u95EE\u9898",width:"70%","close-on-click-modal":!1,"before-close":g},{default:u(()=>[C.value?(p(),R(be,{key:0,onCancel:g,selectQues:w.value,onSubmit:m,sortList:S.value},null,8,["selectQues","sortList"])):X("",!0)]),_:1},8,["modelValue","title"]),r("div",xe,[r("div",ke,[r("h3",null,[he,e(N,{onClick:t[3]||(t[3]=l=>B.value=!0)},{default:u(()=>[e(E(te))]),_:1})]),r("div",{onClick:t[4]||(t[4]=l=>y(null)),class:W(n.value?"":"act")},"\u5168\u90E8",2),(p(!0),F(L,null,z(S.value,l=>(p(),F("div",{key:l.id,onClick:h=>y(l.identity),class:W(n.value==l.identity?"act":"")},[r("span",null,D(l.name),1),r("div",we,[e(N,{title:"\u5220\u9664",onClick:Y(h=>Q(l),["stop"])},{default:u(()=>[e(E(me))]),_:2},1032,["onClick"]),e(N,{title:"\u7F16\u8F91",onClick:Y(h=>k(l),["stop"])},{default:u(()=>[e(E(Z))]),_:2},1032,["onClick"])])],10,Ee))),128))]),ce((p(),F("div",Ae,[r("h3",null,[e(H,{style:{width:"200px","margin-right":"10px"},modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=l=>i.value=l),clearable:"",onChange:t[6]||(t[6]=l=>y(n.value)),onClear:t[7]||(t[7]=l=>y(null)),placeholder:"\u8BF7\u641C\u7D22","suffix-icon":o.Search},null,8,["modelValue","suffix-icon"]),e(G,{type:"primary",onClick:t[8]||(t[8]=l=>C.value=!0)},{default:u(()=>[De]),_:1})]),r("div",Se,[(p(!0),F(L,null,z(c.value,l=>(p(),F("div",{class:"item",key:l.id},[r("div",null,[r("div",$e,[r("b",null,D(l.title),1),r("div",Ue,[(p(!0),F(L,null,z(l.problem_categories,h=>(p(),F("span",{key:h.id},[h.category_basic?(p(),F("b",ze,D(h.category_basic.name),1)):X("",!0)]))),128))])]),r("div",Le,[r("span",null,"\u521B\u5EFA\u65F6\u95F4\uFF1A"+D(l.created_at),1),r("span",null,"\u63D0\u4EA4\u4EBA\u6570\uFF1A"+D(l.submit_num),1),r("span",null,"\u901A\u8FC7\u4EBA\u6570\uFF1A"+D(l.pass_num),1)])]),r("div",Pe,[e(N,{title:"\u7F16\u8F91",onClick:h=>T(l)},{default:u(()=>[e(E(Z))]),_:2},1032,["onClick"])])]))),128))])])),[[ue,d.value]])]),r("div",qe,[e(le,{currentPage:U.value,"onUpdate:currentPage":t[9]||(t[9]=l=>U.value=l),"page-size":$.value,"onUpdate:page-size":t[10]||(t[10]=l=>$.value=l),"page-sizes":[10,20,50,100],layout:"total,sizes, prev, pager, next",total:P.value,onSizeChange:j,onCurrentChange:q},null,8,["currentPage","page-size","total"])])])}}});var je=pe(Qe,[["__scopeId","data-v-52e6953e"]]);export{je as default};
